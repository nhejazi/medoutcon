<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Efficient causal mediation analysis with the natural and interventional effects • medoutcon</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Efficient causal mediation analysis with the natural and interventional effects">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">medoutcon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro_medoutcon.html">Efficient causal mediation analysis with the natural and interventional effects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nhejazi/medoutcon/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Efficient causal mediation analysis with the
natural and interventional effects</h1>
                        <h4 data-toc-skip class="author">
<a href="https://nimahejazi.org" class="external-link">Nima Hejazi</a>, <a href="https://www.idiaz.xyz/" class="external-link">Iván Díaz</a>, and <a href="https://kararudolph.github.io/" class="external-link">Kara Rudolph</a>
</h4>
            
            <h4 data-toc-skip class="date">2025-07-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nhejazi/medoutcon/blob/HEAD/vignettes/intro_medoutcon.Rmd" class="external-link"><code>vignettes/intro_medoutcon.Rmd</code></a></small>
      <div class="hidden name"><code>intro_medoutcon.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="background-and-motivations">Background and Motivations<a class="anchor" aria-label="anchor" href="#background-and-motivations"></a>
</h2>
<p>An exposure of interest often affects an outcome directly, or
indirectly by the mediation of some intermediate variables. Identifying
and quantifying the mechanisms underlying causal effects is an
increasingly popular endeavor in public health, medicine, and the social
sciences, as knowledge of such mechanisms can improve understanding of
both <em>why and how</em> treatments can be effective. Such mechanistic
knowledge may be arguably even more important in cases where treatments
result in unanticipated ineffective or even harmful effects.</p>
<p>Traditional techniques for mediation analysis fare poorly in the face
of intermediate confounding. Classical parameters like the natural
(in)direct effects face a lack of identifiability in cases where
mediator-outcome (i.e., intermediate) confounders affected by exposure
complicate the relationship between the exposure, mediators, and
outcome. <span class="citation">Dı́az et al. (2020)</span> provide a
theoretical and computational study of the properties of newly developed
interventional (in)direct effect estimands within the non-parametric
statistical model. Among their contributions, <span class="citation">Dı́az et al. (2020)</span></p>
<ul>
<li>derive the efficient influence function (EIF), an key object in
semiparametric efficiency theory;</li>
<li>use the EIF to develop two asymptotically optimal, non-parametric
estimators, each of which is capable of leveraging machine learning for
the estimation of nuisance parameters; and</li>
<li>present theoretical conditions under which their proposed estimators
are consistent, multiply robust, and efficient.</li>
</ul>
</div>
<div class="section level2">
<h2 id="problem-setup-and-notation">Problem Setup and Notation<a class="anchor" aria-label="anchor" href="#problem-setup-and-notation"></a>
</h2>
<p>The problem addressed by the work of <span class="citation">Dı́az et
al. (2020)</span> may be represented by the following nonparametric
structural equation model (NPSEM):
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right; padding-right: 0"><mi>W</mi></mtd><mtd columnalign="left" style="text-align: left; padding-left: 0"><mo>=</mo><msub><mi>f</mi><mi>W</mi></msub><mo stretchy="false" form="prefix">(</mo><msub><mi>U</mi><mi>W</mi></msub><mo stretchy="false" form="postfix">)</mo><mo>;</mo><mi>A</mi><mo>=</mo><msub><mi>f</mi><mi>A</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>W</mi><mo>,</mo><msub><mi>U</mi><mi>A</mi></msub><mo stretchy="false" form="postfix">)</mo><mo>;</mo><mi>Z</mi><mo>=</mo><msub><mi>f</mi><mi>Z</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>W</mi><mo>,</mo><mi>A</mi><mo>,</mo><msub><mi>U</mi><mi>Z</mi></msub><mo stretchy="false" form="postfix">)</mo><mo>;</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right; padding-right: 0"><mi>M</mi></mtd><mtd columnalign="left" style="text-align: left; padding-left: 0"><mo>=</mo><msub><mi>f</mi><mi>M</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>W</mi><mo>,</mo><mi>A</mi><mo>,</mo><mi>Z</mi><mo>,</mo><msub><mi>U</mi><mi>M</mi></msub><mo stretchy="false" form="postfix">)</mo><mo>;</mo><mi>Y</mi><mo>=</mo><msub><mi>f</mi><mi>Y</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>W</mi><mo>,</mo><mi>A</mi><mo>,</mo><mi>Z</mi><mo>,</mo><mi>M</mi><mo>,</mo><msub><mi>U</mi><mi>Y</mi></msub><mo stretchy="false" form="postfix">)</mo><mi>.</mi></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}
  W &amp;= f_W(U_W); A = f_A(W, U_A); Z=f_Z(W, A, U_Z);\\ \nonumber
  M &amp;= f_M(W, A, Z, U_M); Y = f_Y(W, A, Z, M, U_Y).
\end{align*}</annotation></semantics></math> In the NPSEM,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>
denotes a vector of observed pre-treatment covariates,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>
denotes a categorical treatment variable,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
denotes an intermediate confounder affected by treatment,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi><annotation encoding="application/x-tex">M</annotation></semantics></math>
denotes a (possibly multivariate) mediator, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>
denotes a continuous or binary outcome. The vector of exogenous factors
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo>=</mo><mo stretchy="false" form="prefix">(</mo><msub><mi>U</mi><mi>W</mi></msub><mo>,</mo><msub><mi>U</mi><mi>A</mi></msub><mo>,</mo><msub><mi>U</mi><mi>Z</mi></msub><mo>,</mo><msub><mi>U</mi><mi>M</mi></msub><mo>,</mo><msub><mi>U</mi><mi>Y</mi></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">U=(U_W,U_A,U_Z,U_M,U_Y)</annotation></semantics></math>,
and the functions
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi><annotation encoding="application/x-tex">f</annotation></semantics></math>,
are assumed deterministic but unknown. Importantly, the NPSEM encodes a
time-ordering between these variables and allows the evaluation of
counterfactual quantities defined by intervening on a set of nodes of
the NPSEM. The observed data unit can be represented by the random
variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo>=</mo><mo stretchy="false" form="prefix">(</mo><mi>W</mi><mo>,</mo><mi>A</mi><mo>,</mo><mi>Z</mi><mo>,</mo><mi>M</mi><mo>,</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">O = (W, A, Z, M, Y)</annotation></semantics></math>;
we consider access to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>O</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">O_1, \ldots, O_n</annotation></semantics></math>,
a sample of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
i.i.d. observations of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>O</mi><annotation encoding="application/x-tex">O</annotation></semantics></math>.</p>
<p><span class="citation">Dı́az et al. (2020)</span> additionally define
the following parameterizations, familiarity with which will be useful
for using the <a href="https://github.com/nhejazi/medoutcon" class="external-link"><code>medoutcon</code>
<code>R</code> package</a>. In particular, these authors define
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false" form="prefix">(</mo><mi>a</mi><mo>∣</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">g(a \mid w)</annotation></semantics></math>
as the probability mass function of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">A = a</annotation></semantics></math>
conditional on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>=</mo><mi>w</mi></mrow><annotation encoding="application/x-tex">W = w</annotation></semantics></math>
and use
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false" form="prefix">(</mo><mi>a</mi><mo>∣</mo><mi>m</mi><mo>,</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">h(a \mid m, w)</annotation></semantics></math>
to denote the probability mass function of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">A
= a</annotation></semantics></math> conditional on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo>,</mo><mi>W</mi><mo stretchy="false" form="postfix">)</mo><mo>=</mo><mo stretchy="false" form="prefix">(</mo><mi>m</mi><mo>,</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(M, W) = (m, w)</annotation></semantics></math>.
Further, <span class="citation">Dı́az et al. (2020)</span> use
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo stretchy="false" form="prefix">(</mo><mi>a</mi><mo>,</mo><mi>z</mi><mo>,</mo><mi>m</mi><mo>,</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">b(a, z, m, w)</annotation></semantics></math>
to denote the outcome regression function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝔼</mi><mo stretchy="false" form="prefix">(</mo><mi>Y</mi><mo>∣</mo><mi>A</mi><mo>=</mo><mi>a</mi><mo>,</mo><mi>Z</mi><mo>=</mo><mi>z</mi><mo>,</mo><mi>M</mi><mo>=</mo><mi>m</mi><mo>,</mo><mi>W</mi><mo>=</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}(Y \mid A
= a, Z = z, M = m, W = w)</annotation></semantics></math>, as well as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false" form="prefix">(</mo><mi>z</mi><mo>∣</mo><mi>a</mi><mo>,</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">q(z \mid a,w)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo stretchy="false" form="prefix">(</mo><mi>z</mi><mo>∣</mo><mi>a</mi><mo>,</mo><mi>m</mi><mo>,</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">r(z \mid a, m, w)</annotation></semantics></math>
to denote the corresponding conditional densities of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>.</p>
</div>
<div class="section level2">
<h2 id="interventional-indirect-effects">Interventional (In)Direct Effects<a class="anchor" aria-label="anchor" href="#interventional-indirect-effects"></a>
</h2>
<p><span class="citation">Dı́az et al. (2020)</span> define the <em>total
effect</em> of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>
on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>
in terms of a contrast between two user-supplied values
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>∈</mo><mi>𝒜</mi></mrow><annotation encoding="application/x-tex">a', a^{\star} \in \mathcal{A}</annotation></semantics></math>.
Examination of the NPSEM reveals that there are four paths involved in
this effect, namely
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">A \rightarrow Y</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>M</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">A \rightarrow M \rightarrow Y</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>Z</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">A
\rightarrow Z \rightarrow Y</annotation></semantics></math>, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>Z</mi><mo>→</mo><mi>M</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">A \rightarrow Z \rightarrow M \rightarrow Y</annotation></semantics></math>.
Mediation analysis has classically considered the <em>natural direct
effect</em> (NDE) and the <em>natural indirect effect</em> (NIE), which
are defined as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝔼</mi><mi>c</mi></msub><mo stretchy="false" form="prefix">(</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>M</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>⋆</mo></msup><mo>,</mo><msub><mi>M</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub></mrow></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}_c(Y_{a', M_{a^{\star}}} - Y_{a^{\star}, M_{a^{\star}}})</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝔼</mi><mi>c</mi></msub><mo stretchy="false" form="prefix">(</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>M</mi><msup><mi>a</mi><mo>′</mo></msup></msub></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>M</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub></mrow></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}_c(Y_{a',M_{a'}} - Y_{a',M_{a^{\star}}})</annotation></semantics></math>,
respectively. The natural direct effect measures the effect through
paths <em>not</em> involving the mediator
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">A \rightarrow Y</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>Z</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">A \rightarrow Z \rightarrow Y</annotation></semantics></math>),
whereas the natural indirect effect measures the effect through paths
involving the mediator
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>M</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">A \rightarrow M \rightarrow Y</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>Z</mi><mo>→</mo><mi>M</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">A \rightarrow Z \rightarrow M \rightarrow
Y</annotation></semantics></math>). As the sum of the natural direct and
indirect effects equals the average treatment effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝔼</mi><mi>c</mi></msub><mo stretchy="false" form="prefix">(</mo><msub><mi>Y</mi><mn>1</mn></msub><mo>−</mo><msub><mi>Y</mi><mn>0</mn></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}_c(Y_1-Y_0)</annotation></semantics></math>,
this effect decomposition is appealing. Unfortunately, the natural
direct and indirect effects are not generally identified in the presence
of an intermediate confounder affected by treatment.</p>
<p>To circumvent this issue, <span class="citation">Dı́az et al.
(2020)</span> define the direct and indirect effects using stochastic
interventions on the mediator, following a strategy previously outlined
by <span class="citation">VanderWeele, Vansteelandt, and Robins
(2014)</span> and <span class="citation">Rudolph et al. (2017)</span>,
among others. Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>G</mi><mi>a</mi></msub><annotation encoding="application/x-tex">G_a</annotation></semantics></math>
denote a random draw from the conditional distribution of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mi>a</mi></msub><annotation encoding="application/x-tex">M_a</annotation></semantics></math>
conditional on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>.
Consider the effect of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>
on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>
defined as the difference in expected outcome in hypothetical worlds in
which
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>A</mi><mo>,</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>=</mo><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>′</mo></msup></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(A,M) = (a',
G_{a'})</annotation></semantics></math> versus
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>A</mi><mo>,</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>=</mo><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(A,M) = (a^{\star}, G_{a^{\star}})</annotation></semantics></math>
with probability one, which may be decomposed into direct and indirect
effects as follows
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝔼</mi><mi>c</mi></msub><mo stretchy="false" form="prefix">(</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>′</mo></msup></msub></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>⋆</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub></mrow></msub><mo stretchy="false" form="postfix">)</mo><mo>=</mo><munder><munder><mrow><msub><mi>𝔼</mi><mi>c</mi></msub><mo stretchy="false" form="prefix">(</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>′</mo></msup></msub></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub></mrow></msub><mo stretchy="false" form="postfix">)</mo></mrow><mo accent="true">⏟</mo></munder><mrow><mrow><mtext mathvariant="normal">Indirect effect (through </mtext><mspace width="0.333em"></mspace></mrow><mi>M</mi><mtext mathvariant="normal">)</mtext></mrow></munder><mo>+</mo><munder><munder><mrow><msub><mi>𝔼</mi><mi>c</mi></msub><mo stretchy="false" form="prefix">(</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>⋆</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub></mrow></msub><mo stretchy="false" form="postfix">)</mo></mrow><mo accent="true">⏟</mo></munder><mrow><mrow><mtext mathvariant="normal">Direct effect (not through </mtext><mspace width="0.333em"></mspace></mrow><mi>M</mi><mtext mathvariant="normal">)</mtext></mrow></munder><mi>.</mi></mrow><annotation encoding="application/x-tex">\begin{equation*}
\mathbb{E}_c(Y_{a', G_{a'}} - Y_{a^{\star}, G_{a^{\star}}}) =
  \underbrace{\mathbb{E}_c(Y_{a', G_{a'}} - Y_{a',
    G_{a^{\star}}})}_{\text{Indirect effect (through $M$)}} +
  \underbrace{\mathbb{E}_c(Y_{a', G_{a^{\star}}} - Y_{a^{\star},
      G_{a^{\star}}})}_{\text{Direct effect (not through $M$)}}.
\end{equation*}</annotation></semantics></math> Like the natural direct
effect, this interventional direct effect measures the effects through
paths not involving the mediator. Likewise, the interventional indirect
effect measures the effect through paths involving the mediator. Note,
however, that natural and interventional mediation effects have
different interpretations. That is, the interventional indirect effect
measures the effect of fixing the exposure at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>a</mi><mo>′</mo></msup><annotation encoding="application/x-tex">a'</annotation></semantics></math>
while setting the mediator to a random draw
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>G</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub><annotation encoding="application/x-tex">G_{a^{\star}}</annotation></semantics></math>
from those with exposure
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>a</mi><mo>′</mo></msup><annotation encoding="application/x-tex">a'</annotation></semantics></math>
versus a random draw
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>G</mi><msup><mi>a</mi><mo>′</mo></msup></msub><annotation encoding="application/x-tex">G_{a'}</annotation></semantics></math>
from those with exposure
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>a</mi><mo>⋆</mo></msup><annotation encoding="application/x-tex">a^{\star}</annotation></semantics></math>,
given covariates
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>.
As is clear from the effect decomposition, the term
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>c</mi></msub><mo>=</mo><msub><mi>𝔼</mi><mi>c</mi></msub><mo stretchy="false" form="prefix">(</mo><msub><mi>Y</mi><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msub><mi>G</mi><msup><mi>a</mi><mo>⋆</mo></msup></msub></mrow></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\theta_c = \mathbb{E}_c(Y_{a', G_{a^{\star}}})</annotation></semantics></math>
is required for estimation of both the interventional direct and
indirect effects; thus, <span class="citation">Dı́az et al. (2020)</span>
focus on estimation of this quantity. Importantly, it has been shown
that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>c</mi></msub><annotation encoding="application/x-tex">\theta_c</annotation></semantics></math>
is identified by the statistical functional
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>=</mo><mo>∫</mo><mi>b</mi><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><mi>z</mi><mo>,</mo><mi>m</mi><mo>,</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo><mi>q</mi><mo stretchy="false" form="prefix">(</mo><mi>z</mi><mo>∣</mo><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo><mi>p</mi><mo stretchy="false" form="prefix">(</mo><mi>m</mi><mo>∣</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>,</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo><mi>p</mi><mo stretchy="false" form="prefix">(</mo><mi>w</mi><mo stretchy="false" form="postfix">)</mo><mi>d</mi><mi>ν</mi><mo stretchy="false" form="prefix">(</mo><mi>w</mi><mo>,</mo><mi>z</mi><mo>,</mo><mi>m</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\begin{equation*}
  \theta = \int b(a', z, m, w) q(z \mid a', w) p(m \mid a^{\star}, w)
    p(w) d\nu(w,z,m)
\end{equation*}</annotation></semantics></math> under a set of standard
identifiability conditions <span class="citation">(VanderWeele,
Vansteelandt, and Robins 2014)</span>, which are further reviewed in
<span class="citation">Dı́az et al. (2020)</span>.</p>
</div>
<div class="section level2">
<h2 id="efficient-estimation">Efficient Estimation<a class="anchor" aria-label="anchor" href="#efficient-estimation"></a>
</h2>
<p><span class="citation">Dı́az et al. (2020)</span> define two efficient
estimators of their interventional (in)direct effects. These are based
on the one-step estimation and targeted minimum loss (TML) estimation
frameworks, respectively. Briefly, both estimation strategies proceed in
two stages, starting by first constructing initial estimates of the
nuisance parameters present in the EIF, then proceeding to apply
distinct bias-correction strategies in their second stages. Both
estimation strategies require an assumption about the behavior of
initial estimators of the nuisance parameters (specifically, that these
lie in a Donsker class); however, the need for such an assumption may be
avoided by making use of cross-validation in the fitting fo initial
estimators. The <code>medoutcon</code> <code>R</code> package requires
the use of cross-validation in the construction of these initial
estimates, resulting in cross-fitted one-step and and cross-validated
TML estimators <span class="citation">(Klaassen 1987; Zheng and van der
Laan 2011; Chernozhukov et al. 2018)</span>.</p>
<p>The one-step estimator
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">os</mtext></msub><annotation encoding="application/x-tex">\hat{\theta}_{\text{os}}</annotation></semantics></math>
is constructed by adding the empirical mean of the EIF (evaluated at
initial estimates of the nuisance parameters) to the substitution
estimator. By constrast, the TML estimator
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">tmle</mtext></msub><annotation encoding="application/x-tex">\hat{\theta}_{\text{tmle}}</annotation></semantics></math>
updates the components of the substitution estimator via logistic
tilting models formulated to ensure that relevant score equations
appearing in the EIF are (approximately) solved. While the estimators
are asymptotically equivalent, TML estimators have been shown to exhibit
superior finite-sample performance, making them potentially more
reliable than one-step estimators. For the exact form of the EIF as well
as those of the one-step and TML estimators, consult <span class="citation">Dı́az et al. (2020)</span>.</p>
</div>
<div class="section level2">
<h2 id="data-analysis-example">Data Analysis Example<a class="anchor" aria-label="anchor" href="#data-analysis-example"></a>
</h2>
<div class="section level3">
<h3 id="setting-up-the-data-example">Setting up the data example<a class="anchor" aria-label="anchor" href="#setting-up-the-data-example"></a>
</h3>
<p>Now, we’ll take a look at how to estimate the interventional direct
and indirect effects using a simulated data example. <span class="citation">Dı́az et al. (2020)</span> illustrate the use of their
estimators of these effects in an application in which they seek to
elucidate the mechanisms behind the unintended harmful effects that a
housing intervention had on adolescent girls’ risk behavior.</p>
<p>First, let’s load a few required packages and set a seed for our
simulation.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nhejazi/medoutcon" class="external-link">medoutcon</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tlverse.org/sl3" class="external-link">sl3</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">75681</span><span class="op">)</span></span>
<span><span class="va">n_obs</span> <span class="op">&lt;-</span> <span class="fl">500</span></span></code></pre></div>
<p>Next, we’ll generate a very simple simulated dataset. The function
<code>make_example_data</code>, defined below, generates three binary
baseline covariates
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>=</mo><mo stretchy="false" form="prefix">(</mo><msub><mi>W</mi><mn>1</mn></msub><mo>,</mo><msub><mi>W</mi><mn>2</mn></msub><mo>,</mo><msub><mi>W</mi><mn>3</mn></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">W = (W_1, W_2, W_3)</annotation></semantics></math>,
a binary exposure variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>,
a single binary mediateor
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi><annotation encoding="application/x-tex">M</annotation></semantics></math>
an intermediate confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
that affects the mediator
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi><annotation encoding="application/x-tex">M</annotation></semantics></math>
and is itself affected by the exposure
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>,
and, finally, a binary outcome
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>
that is a function of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>W</mi><mo>,</mo><mi>A</mi><mo>,</mo><mi>Z</mi><mo>,</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(W, A, Z, M)</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># produces a simple data set based on ca causal model with mediation</span></span>
<span><span class="va">make_example_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n_obs</span> <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co">## baseline covariates</span></span>
<span>  <span class="va">w_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span>
<span>  <span class="va">w_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span>  <span class="va">w_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fl">0.2</span> <span class="op">+</span> <span class="op">(</span><span class="va">w_1</span> <span class="op">+</span> <span class="va">w_2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">w_1</span>, <span class="va">w_2</span>, <span class="va">w_3</span><span class="op">)</span></span>
<span>  <span class="va">w_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"W"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## exposure</span></span>
<span>  <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## mediator-outcome confounder affected by treatment</span></span>
<span>  <span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">w</span> <span class="op">-</span> <span class="va">a</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## mediator -- could be multivariate</span></span>
<span>  <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="op">*</span> <span class="va">w</span><span class="op">[</span>, <span class="op">-</span><span class="fl">3</span><span class="op">]</span> <span class="op">+</span> <span class="va">a</span> <span class="op">-</span> <span class="va">z</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">m_names</span> <span class="op">&lt;-</span> <span class="st">"M"</span></span>
<span></span>
<span>  <span class="co">## outcome</span></span>
<span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="op">-</span> <span class="va">z</span> <span class="op">+</span> <span class="va">a</span> <span class="op">+</span> <span class="va">m</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## construct output</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>w <span class="op">=</span> <span class="va">w</span>, a <span class="op">=</span> <span class="va">a</span>, z <span class="op">=</span> <span class="va">z</span>, m <span class="op">=</span> <span class="va">m</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">w_names</span>, <span class="st">"A"</span>, <span class="st">"Z"</span>, <span class="va">m_names</span>, <span class="st">"Y"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># set seed and simulate example data</span></span>
<span><span class="va">example_data</span> <span class="op">&lt;-</span> <span class="fu">make_example_data</span><span class="op">(</span><span class="va">n_obs</span><span class="op">)</span></span>
<span><span class="va">w_names</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html" class="external-link">str_subset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">)</span>, <span class="st">"W"</span><span class="op">)</span></span>
<span><span class="va">m_names</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html" class="external-link">str_subset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">)</span>, <span class="st">"M"</span><span class="op">)</span></span></code></pre></div>
<p>Now, let’s take a quick look at our simulated data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># quick look at the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      W_1   W_2   W_3     A     Z     M     Y</span></span>
<span><span class="co">##    &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;</span></span>
<span><span class="co">## 1:     0     0     1     0     0     0     1</span></span>
<span><span class="co">## 2:     0     1     1     0     0     0     1</span></span>
<span><span class="co">## 3:     1     1     0     0     1     1     1</span></span>
<span><span class="co">## 4:     1     0     1     0     1     0     0</span></span>
<span><span class="co">## 5:     0     0     0     1     1     1     1</span></span>
<span><span class="co">## 6:     1     0     1     1     0     1     1</span></span></code></pre>
<p>As noted above, all covariates in our dataset are binary; however,
note that this need not be the case for using our methodology — in
particular, the only current limitation is that the intermediate
confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
must be binary when using our implemented TML estimator of the
(in)direct effects.</p>
<p>Using this dataset, we’ll proceed to estimate the interventional
(in)direct effects. In order to do so, we’ll need to estimate several
nuisance parameters, including the exposure mechanism
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false" form="prefix">(</mo><mi>A</mi><mo>∣</mo><mi>W</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">g(A \mid W)</annotation></semantics></math>,
a re-parameterized exposure mechanism that conditions on the mediators
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false" form="prefix">(</mo><mi>A</mi><mo>∣</mo><mi>M</mi><mo>,</mo><mi>W</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">h(A \mid M, W)</annotation></semantics></math>,
the outcome mechanism
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo stretchy="false" form="prefix">(</mo><mi>Y</mi><mo>∣</mo><mi>M</mi><mo>,</mo><mi>Z</mi><mo>,</mo><mi>A</mi><mo>,</mo><mi>W</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">b(Y \mid M, Z, A, W)</annotation></semantics></math>,
and two variants of the intermediate confounding mechanism
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false" form="prefix">(</mo><mi>Z</mi><mo>∣</mo><mi>A</mi><mo>,</mo><mi>W</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">q(Z \mid A, W)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo stretchy="false" form="prefix">(</mo><mi>Z</mi><mo>∣</mo><mi>M</mi><mo>,</mo><mi>A</mi><mo>,</mo><mi>W</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">r(Z \mid M, A, W)</annotation></semantics></math>.
In order to estimate each of these nuisance parameters flexibly, we’ll
rely on data adaptive regression strategies in order to avoid the
potential for (parametric) model misspecification.</p>
<!--
Note that there are two additional nuisance parameters that must also be
estimated ($u$ and $v$), which are themselves functions of the other nuisance
parameters.  We recommend estimating these via the highly adaptive lasso, which
is the...
-->
</div>
<div class="section level3">
<h3 id="ensemble-learning-of-nuisance-functions">Ensemble learning of nuisance functions<a class="anchor" aria-label="anchor" href="#ensemble-learning-of-nuisance-functions"></a>
</h3>
<p>As we’d like to rely on flexible, data adaptive regression strategies
for estimating each of the nuisance parameters
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>g</mi><mo>,</mo><mi>h</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>q</mi><mo>,</mo><mi>r</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(g, h, b, q, r)</annotation></semantics></math>,
we require a method for choosing among or combining the wide variety of
available regression strategies. For this, we recommend the use of the
Super Learner algorithm for ensemble machine learning <span class="citation">(van der Laan, Polley, and Hubbard 2007)</span>. The
recently developed <a href="https://tlverse.org/sl3" class="external-link"><code>sl3</code> R
package</a> <span class="citation">(<strong>coyle2020sl3?</strong>)</span> provides a
unified interface for deploying a wide variety of machine learning
algorithms (simply called <em>learners</em> in the <code>sl3</code>
nomenclature) as well as for constructing Super Learner ensemble models
of such learners. For a complete guide on using the <code>sl3</code> R
package, consider consulting <a href="https://tlverse.org/sl3" class="external-link uri">https://tlverse.org/sl3</a>, or <a href="https://tlverse.org" class="external-link uri">https://tlverse.org</a> (and <a href="https://github.com/tlverse" class="external-link uri">https://github.com/tlverse</a>) for the <code>tlverse</code>
ecosystem, of which <code>sl3</code> is an integral part.</p>
<p>To construct an ensemble learner using a handful of popular machine
learning algorithms, we’ll first instantiate variants of learners from
the appropriate classes for each algorithm, and then create a Super
Learner ensemble via the <code>Lrnr_sl</code> class. Below, we
demonstrate the construction of an ensemble learner based on a modeling
library including an intercept model, a main-terms GLM,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ℓ</mi><mn>1</mn></msub><annotation encoding="application/x-tex">\ell_1</annotation></semantics></math>-penalized
Lasso regression, an elastic net regression that equally weights the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ℓ</mi><mn>1</mn></msub><annotation encoding="application/x-tex">\ell_1</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ℓ</mi><mn>2</mn></msub><annotation encoding="application/x-tex">\ell_2</annotation></semantics></math>
penalties, random forests (<code>ranger</code>), and the highly adaptive
lasso (HAL):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># instantiate learners</span></span>
<span><span class="va">mean_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_mean.html" class="external-link">Lrnr_mean</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">fglm_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glm_fast.html" class="external-link">Lrnr_glm_fast</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lasso_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glmnet.html" class="external-link">Lrnr_glmnet</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, nfolds <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">enet_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glmnet.html" class="external-link">Lrnr_glmnet</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, nfolds <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">rf_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_ranger.html" class="external-link">Lrnr_ranger</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>num.trees <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for HAL, use linear probability formulation, with bounding in unit interval</span></span>
<span><span class="va">hal_gaussian_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_hal9001.html" class="external-link">Lrnr_hal9001</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  family <span class="op">=</span> <span class="st">"gaussian"</span>,</span>
<span>  fit_control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    max_degree <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    n_folds <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    use_min <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    type.measure <span class="op">=</span> <span class="st">"mse"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">bound_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_bound.html" class="external-link">Lrnr_bound</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>bound <span class="op">=</span> <span class="fl">1e-6</span><span class="op">)</span></span>
<span><span class="va">hal_bounded_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Pipeline.html" class="external-link">Pipeline</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">hal_gaussian_lrnr</span>, <span class="va">bound_lrnr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create learner library and instantiate super learner ensemble</span></span>
<span><span class="va">lrnr_lib</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">mean_lrnr</span>, <span class="va">fglm_lrnr</span>, <span class="va">enet_lrnr</span>, <span class="va">lasso_lrnr</span>,</span>
<span>  <span class="va">rf_lrnr</span>, <span class="va">hal_bounded_lrnr</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sl_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_sl.html" class="external-link">Lrnr_sl</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>learners <span class="op">=</span> <span class="va">lrnr_lib</span>, metalearner <span class="op">=</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_nnls.html" class="external-link">Lrnr_nnls</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>While we recommend the use of a Super Learner ensemble model like the
one constructed above in practice, such a library will be too
computationally intensive for our examples. To reduce computation time,
we construct a simpler library, using only a subset of the above
learning algorithms:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create simpler learner library and instantiate super learner ensemble</span></span>
<span><span class="va">lrnr_lib</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">mean_lrnr</span>, <span class="va">fglm_lrnr</span>, <span class="va">lasso_lrnr</span>, <span class="va">rf_lrnr</span><span class="op">)</span></span>
<span><span class="va">sl_lrnr</span> <span class="op">&lt;-</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_sl.html" class="external-link">Lrnr_sl</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>learners <span class="op">=</span> <span class="va">lrnr_lib</span>, metalearner <span class="op">=</span> <span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_nnls.html" class="external-link">Lrnr_nnls</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Having set up our ensemble learner, we’re now ready to estimate each
of the interventional effects using the efficient estimators exposed in
the <code>medoutcon</code> package.</p>
</div>
<div class="section level3">
<h3 id="estimating-the-direct-effect">Estimating the direct effect<a class="anchor" aria-label="anchor" href="#estimating-the-direct-effect"></a>
</h3>
<p>We’re now ready to estimate the interventional direct effect. This
direct effect is computed as a contrast between the interventions
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a' = 1, a^{\star} = 0)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>0</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a' = 0, a^{\star} = 0)</annotation></semantics></math>.
In particular, our efficient estimators of the interventional direct
effect proceed by constructing estimators
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\hat{\theta}(a' = 1, a^{\star} = 0)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>0</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\hat{\theta}(a' = 0, a^{\star} = 0)</annotation></semantics></math>.
Then, an efficient estimator of the direct effect is available by
application of the delta method, that is,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">DE</mtext></msup><mo>=</mo><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo><mo>−</mo><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>0</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\hat{\theta}^{\text{DE}} =
\hat{\theta}(a' = 1, a^{\star} = 0) - \hat{\theta}(a' = 0, a^{\star} = 0)</annotation></semantics></math>.
Applying the same principle to the EIF estimates, one can derive
variance estimates and construct asymptotically correct Wald-style
confidence intervals for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">DE</mtext></msup><annotation encoding="application/x-tex">\hat{\theta}^{\text{DE}}</annotation></semantics></math>.</p>
<p>The <code>medoutcon</code> package makes the estimation task quite
simple, as only a single call to the eponymous <code>medoutcon</code>
function is required. As demonstrated below, we need only feed in each
component of the observed data
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo>=</mo><mo stretchy="false" form="prefix">(</mo><mi>W</mi><mo>,</mo><mi>A</mi><mo>,</mo><mi>Z</mi><mo>,</mo><mi>M</mi><mo>,</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">O = (W, A, Z, M, Y)</annotation></semantics></math>
(of which
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi><annotation encoding="application/x-tex">M</annotation></semantics></math>
can be multivariate), specify the effect type, and the estimator.
Additionally, for each nuisance parameter we may specify a separate
regression function — in the examples below, we use the simpler Super
Learner ensemble constructed above for fitting each nuisance function,
but this need not be the case (i.e., different estimators may be used
for each nuisance function).</p>
<p>First, we examine the one-step estimator of the interventional direct
effect. Recall that the one-step estimator is constructed by adding the
mean of the EIF (evaluated at initial estimates of the nuisance
parameters) to the substitution estimator. As noted above, this is done
separately for each of the two contrasts
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>0</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a' = 0, a^{\star} = 0)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a' = 1, a^{\star} = 0)</annotation></semantics></math>.
Thus, the one-step estimator of this direct effect is constructed by
application of the delta method to each of the one-step estimators (and
EIFs) for these contrasts.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># compute one-step estimate of the interventional direct effect</span></span>
<span><span class="va">os_de</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/medoutcon.html">medoutcon</a></span><span class="op">(</span></span>
<span>  W <span class="op">=</span> <span class="va">example_data</span><span class="op">[</span>, <span class="va">..w_names</span><span class="op">]</span>,</span>
<span>  A <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">A</span>,</span>
<span>  Z <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Z</span>,</span>
<span>  M <span class="op">=</span> <span class="va">example_data</span><span class="op">[</span>, <span class="va">..m_names</span><span class="op">]</span>,</span>
<span>  Y <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  g_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  h_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  b_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  q_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  r_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  effect <span class="op">=</span> <span class="st">"direct"</span>,</span>
<span>  estimator <span class="op">=</span> <span class="st">"onestep"</span>,</span>
<span>  estimator_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cv_folds <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">os_de</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">##    lwr_ci param_est upr_ci var_est eif_mean estimator param                </span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> -<span style="color: #BB0000;">0.088</span><span style="color: #BB0000; text-decoration: underline;">1</span>    0.036<span style="text-decoration: underline;">9</span>  0.162 0.004<span style="text-decoration: underline;">06</span> 6.13<span style="color: #949494;">e</span><span style="color: #BB0000;">-17</span> onestep   direct_interventional</span></span></code></pre>
<p>From the output of the summary method, we note that the one-step
estimate of the interventional direct effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">os</mtext><mtext mathvariant="normal">DE</mtext></msubsup><annotation encoding="application/x-tex">\hat{\theta}_{\text{os}}^{\text{DE}}</annotation></semantics></math>
is 0.037, with 95% confidence interval [-0.088, 0.162].</p>
<p>Next, let’s compare the one-step estimate to the TML estimate.
Analogous to the case of the one-step estimator, the TML estimator can
be evaluated via a single call to the <code>medoutcon</code>
function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># compute targeted minimum loss estimate of the interventional direct effect</span></span>
<span><span class="va">tmle_de</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/medoutcon.html">medoutcon</a></span><span class="op">(</span></span>
<span>  W <span class="op">=</span> <span class="va">example_data</span><span class="op">[</span>, <span class="va">..w_names</span><span class="op">]</span>,</span>
<span>  A <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">A</span>,</span>
<span>  Z <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Z</span>,</span>
<span>  M <span class="op">=</span> <span class="va">example_data</span><span class="op">[</span>, <span class="va">..m_names</span><span class="op">]</span>,</span>
<span>  Y <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  g_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  h_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  b_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  q_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  r_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  effect <span class="op">=</span> <span class="st">"direct"</span>,</span>
<span>  estimator <span class="op">=</span> <span class="st">"tmle"</span>,</span>
<span>  estimator_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cv_folds <span class="op">=</span> <span class="fl">2</span>, max_iter <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tmle_de</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">##    lwr_ci param_est upr_ci var_est eif_mean estimator param                </span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> -<span style="color: #BB0000;">0.073</span><span style="color: #BB0000; text-decoration: underline;">6</span>    0.045<span style="text-decoration: underline;">3</span>  0.164 0.003<span style="text-decoration: underline;">68</span>  0.002<span style="text-decoration: underline;">37</span> tmle      direct_interventional</span></span></code></pre>
<p>From the output of the summary method, we note that the TML estimate
of the interventional direct effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">tmle</mtext><mtext mathvariant="normal">DE</mtext></msubsup><annotation encoding="application/x-tex">\hat{\theta}_{\text{tmle}}^{\text{DE}}</annotation></semantics></math>
is 0.045, with 95% confidence interval [-0.074, 0.164]. Here, we recall
that the TML estimator generally exhibits better finite-sample
performance than the one-step estimator <span class="citation">(van der
Laan and Rose 2011, 2018)</span>, so the TML estimate is likely to be
more reliable in our modest sample size of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">n =</annotation></semantics></math>
500.</p>
</div>
<div class="section level3">
<h3 id="estimating-the-indirect-effect">Estimating the indirect effect<a class="anchor" aria-label="anchor" href="#estimating-the-indirect-effect"></a>
</h3>
<p>Estimation of the interventional indirect effect proceeds similarly
to the strategy discussed above for the corresponding direct effect. An
efficient estimator can be computed as a contrast between the
interventions
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a' = 1,
a^{\star} = 0)</annotation></semantics></math> and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>1</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a' = 1, a^{\star} = 1)</annotation></semantics></math>.
Specifically, our efficient estimators of the interventional indirect
effect proceed by constructing estimators
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\hat{\theta}(a' = 1, a^{\star} = 0)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>1</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\hat{\theta}(a' = 1,
a^{\star} = 1)</annotation></semantics></math>. Then, application of the
delta method yields an efficient estimator of the indirect effect, that
is,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">IE</mtext></msup><mo>=</mo><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo><mo>−</mo><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>1</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\hat{\theta}^{\text{IE}} =
\hat{\theta}(a' = 1, a^{\star} = 0) - \hat{\theta}(a' = 1, a^{\star} = 1)</annotation></semantics></math>.
The same principle may be applied to the EIF estimates to derive
variance estimates and construct asymptotically correct Wald-style
confidence intervals for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">IE</mtext></msup><annotation encoding="application/x-tex">\hat{\theta}^{\text{IE}}</annotation></semantics></math>.</p>
<p>Now, we examine the one-step estimator of the interventional indirect
effect. The one-step estimator is constructed by adding the mean of the
EIF (evaluated at initial estimates of the nuisance parameters) to the
substitution estimator. As noted above, this is done separately for each
of the two contrasts
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>1</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a' = 1, a^{\star} = 1)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>a</mi><mo>⋆</mo></msup><mo>=</mo><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a' = 1, a^{\star} = 0)</annotation></semantics></math>.
Thus, the one-step estimator of this indirect effect is constructed by
application of the delta method to each of the one-step estimators (and
EIFs) for the contrasts.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># compute one-step estimate of the interventional indirect effect</span></span>
<span><span class="va">os_ie</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/medoutcon.html">medoutcon</a></span><span class="op">(</span></span>
<span>  W <span class="op">=</span> <span class="va">example_data</span><span class="op">[</span>, <span class="va">..w_names</span><span class="op">]</span>,</span>
<span>  A <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">A</span>,</span>
<span>  Z <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Z</span>,</span>
<span>  M <span class="op">=</span> <span class="va">example_data</span><span class="op">[</span>, <span class="va">..m_names</span><span class="op">]</span>,</span>
<span>  Y <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  g_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  h_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  b_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  q_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  r_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  effect <span class="op">=</span> <span class="st">"indirect"</span>,</span>
<span>  estimator <span class="op">=</span> <span class="st">"onestep"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">os_ie</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">##   lwr_ci param_est  upr_ci var_est  eif_mean estimator param                  </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> -<span style="color: #BB0000;">0.183</span>    -<span style="color: #BB0000;">0.112</span> -<span style="color: #BB0000;">0.042</span><span style="color: #BB0000; text-decoration: underline;">1</span> 0.001<span style="text-decoration: underline;">29</span> -<span style="color: #BB0000;">2.66</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-18</span> onestep   indirect_interventional</span></span></code></pre>
<p>From the output of the summary method, we note that the one-step
estimate of the interventional indirect effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">os</mtext><mtext mathvariant="normal">IE</mtext></msubsup><annotation encoding="application/x-tex">\hat{\theta}_{\text{os}}^{\text{IE}}</annotation></semantics></math>
is -0.112, with 95% confidence interval [-0.183, -0.042].</p>
<p>As before, let’s compare the one-step estimate to the TML estimate.
Analogous to the case of the one-step estimator, the TML estimator can
be evaluated via a single call to the <code>medoutcon</code> function,
as demonstrated below</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># compute targeted minimum loss estimate of the interventional indirect effect</span></span>
<span><span class="va">tmle_ie</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/medoutcon.html">medoutcon</a></span><span class="op">(</span></span>
<span>  W <span class="op">=</span> <span class="va">example_data</span><span class="op">[</span>, <span class="va">..w_names</span><span class="op">]</span>,</span>
<span>  A <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">A</span>,</span>
<span>  Z <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Z</span>,</span>
<span>  M <span class="op">=</span> <span class="va">example_data</span><span class="op">[</span>, <span class="va">..m_names</span><span class="op">]</span>,</span>
<span>  Y <span class="op">=</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  g_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  h_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  b_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  q_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  r_learners <span class="op">=</span> <span class="va">sl_lrnr</span>,</span>
<span>  effect <span class="op">=</span> <span class="st">"indirect"</span>,</span>
<span>  estimator <span class="op">=</span> <span class="st">"tmle"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tmle_ie</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">##   lwr_ci param_est  upr_ci var_est eif_mean estimator param                  </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> -<span style="color: #BB0000;">0.215</span>    -<span style="color: #BB0000;">0.134</span> -<span style="color: #BB0000;">0.052</span><span style="color: #BB0000; text-decoration: underline;">8</span> 0.001<span style="text-decoration: underline;">72</span>   0.021<span style="text-decoration: underline;">3</span> tmle      indirect_interventional</span></span></code></pre>
<p>From the output of the summary method, we note that the TML estimate
of the interventional indirect effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mtext mathvariant="normal">tmle</mtext><mtext mathvariant="normal">IE</mtext></msubsup><annotation encoding="application/x-tex">\hat{\theta}_{\text{tmle}}^{\text{IE}}</annotation></semantics></math>
is -0.134, with 95% confidence interval [-0.215, -0.053]. As before, the
TML estimator provides better finite-sample performance than the
one-step estimator, so it may be preferred in this example.</p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-chernozhukov2018double" class="csl-entry">
Chernozhukov, Victor, Denis Chetverikov, Mert Demirer, Esther Duflo,
Christian Hansen, Whitney Newey, and James Robins. 2018.
<span>“Double/Debiased Machine Learning for Treatment and Structural
Parameters.”</span> <em>The Econometrics Journal</em> 21 (1). <a href="https://doi.org/10.1111/ectj.12097" class="external-link">https://doi.org/10.1111/ectj.12097</a>.
</div>
<div id="ref-diaz2020nonparametric" class="csl-entry">
Dı́az, Iván, Nima S Hejazi, Kara E Rudolph, and Mark J van der Laan.
2020. <span>“Non-Parametric Efficient Causal Mediation with Intermediate
Confounders.”</span> <em>Biometrika</em> 108 (3): 627–41. <a href="https://doi.org/10.1093/biomet/asaa085" class="external-link">https://doi.org/10.1093/biomet/asaa085</a>.
</div>
<div id="ref-klaassen1987consistent" class="csl-entry">
Klaassen, Chris AJ. 1987. <span>“Consistent Estimation of the Influence
Function of Locally Asymptotically Linear Estimators.”</span> <em>Annals
of Statistics</em>, 1548–62. <a href="https://doi.org/10.1214/aos/1176350609" class="external-link">https://doi.org/10.1214/aos/1176350609</a>.
</div>
<div id="ref-rudolph2017robust" class="csl-entry">
Rudolph, Kara E, Oleg Sofrygin, Wenjing Zheng, and Mark J van der Laan.
2017. <span>“Robust and Flexible Estimation of Stochastic Mediation
Effects: A Proposed Method and Example in a Randomized Trial
Setting.”</span> <em>Epidemiologic Methods</em> 7 (1). <a href="https://doi.org/10.1515/em-2017-0007" class="external-link">https://doi.org/10.1515/em-2017-0007</a>.
</div>
<div id="ref-vdl2007super" class="csl-entry">
van der Laan, Mark J, Eric C Polley, and Alan E Hubbard. 2007.
<span>“Super Learner.”</span> <em>Statistical Applications in Genetics
and Molecular Biology</em> 6 (1).
</div>
<div id="ref-vdl2011targeted" class="csl-entry">
van der Laan, Mark J, and Sherri Rose. 2011. <em>Targeted Learning:
Causal Inference for Observational and Experimental Data</em>. Springer
Science &amp; Business Media.
</div>
<div id="ref-vdl2018targeted" class="csl-entry">
———. 2018. <em>Targeted Learning in Data Science: Causal Inference for
Complex Longitudinal Studies</em>. Springer Science &amp; Business
Media.
</div>
<div id="ref-vanderweele2014effect" class="csl-entry">
VanderWeele, Tyler J, Stijn Vansteelandt, and James M Robins. 2014.
<span>“Effect Decomposition in the Presence of an Exposure-Induced
Mediator-Outcome Confounder.”</span> <em>Epidemiology</em> 25 (2): 300.
<a href="https://doi.org/10.1097/ede.0000000000000034" class="external-link">https://doi.org/10.1097/ede.0000000000000034</a>.
</div>
<div id="ref-zheng2011cross" class="csl-entry">
Zheng, Wenjing, and Mark J van der Laan. 2011. <span>“Cross-Validated
Targeted Minimum-Loss-Based Estimation.”</span> In <em>Targeted
Learning: Causal Inference for Observational and Experimental Data</em>,
459–74. Springer. <a href="https://doi.org/10.1007/978-1-4419-9782-1_27" class="external-link">https://doi.org/10.1007/978-1-4419-9782-1_27</a>.
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nima Hejazi, Iván Díaz, Kara Rudolph.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
