<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Efficient estimation of stochastic interventional (in)direct effects — medoutcon • medoutcon</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Efficient estimation of stochastic interventional (in)direct effects — medoutcon"><meta property="og:description" content="Efficient estimation of stochastic interventional (in)direct effects"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">medoutcon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro_medoutcon.html">Efficient causal mediation analysis with the natural and interventional effects</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nhejazi/medoutcon/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Efficient estimation of stochastic interventional (in)direct effects</h1>
    <small class="dont-index">Source: <a href="https://github.com/nhejazi/medoutcon/blob/HEAD/R/medoutcon.R" class="external-link"><code>R/medoutcon.R</code></a></small>
    <div class="hidden name"><code>medoutcon.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Efficient estimation of stochastic interventional (in)direct effects</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">medoutcon</span><span class="op">(</span></span>
<span>  <span class="va">W</span>,</span>
<span>  <span class="va">A</span>,</span>
<span>  <span class="va">Z</span>,</span>
<span>  <span class="va">M</span>,</span>
<span>  <span class="va">Y</span>,</span>
<span>  R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Y</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  obs_weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Y</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  svy_weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  two_phase_weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Y</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"direct"</span>, <span class="st">"indirect"</span><span class="op">)</span>,</span>
<span>  contrast <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  g_learners <span class="op">=</span> <span class="fu">sl3</span><span class="fu">::</span><span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glm_fast.html" class="external-link">Lrnr_glm_fast</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  h_learners <span class="op">=</span> <span class="fu">sl3</span><span class="fu">::</span><span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glm_fast.html" class="external-link">Lrnr_glm_fast</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  b_learners <span class="op">=</span> <span class="fu">sl3</span><span class="fu">::</span><span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glm_fast.html" class="external-link">Lrnr_glm_fast</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  q_learners <span class="op">=</span> <span class="fu">sl3</span><span class="fu">::</span><span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glm_fast.html" class="external-link">Lrnr_glm_fast</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  r_learners <span class="op">=</span> <span class="fu">sl3</span><span class="fu">::</span><span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glm_fast.html" class="external-link">Lrnr_glm_fast</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  u_learners <span class="op">=</span> <span class="fu">sl3</span><span class="fu">::</span><span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_hal9001.html" class="external-link">Lrnr_hal9001</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  v_learners <span class="op">=</span> <span class="fu">sl3</span><span class="fu">::</span><span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_hal9001.html" class="external-link">Lrnr_hal9001</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  d_learners <span class="op">=</span> <span class="fu">sl3</span><span class="fu">::</span><span class="va"><a href="https://tlverse.org/sl3/reference/Lrnr_glm_fast.html" class="external-link">Lrnr_glm_fast</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  estimator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tmle"</span>, <span class="st">"onestep"</span><span class="op">)</span>,</span>
<span>  estimator_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cv_folds <span class="op">=</span> <span class="fl">5L</span>, max_iter <span class="op">=</span> <span class="fl">5L</span>, tiltmod_tol <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>W</dt>
<dd><p>A <code>matrix</code>, <code>data.frame</code>, or similar object corresponding
to a set of baseline covariates.</p></dd>


<dt>A</dt>
<dd><p>A <code>numeric</code> vector corresponding to a treatment variable. The
parameter of interest is defined as a location shift of this quantity.</p></dd>


<dt>Z</dt>
<dd><p>A <code>numeric</code> vector corresponding to an intermediate confounder
affected by treatment (on the causal pathway between the intervention A,
mediators M, and outcome Y, but unaffected itself by the mediators). When
set to <code>NULL</code>, the natural (in)direct effects are estimated.</p></dd>


<dt>M</dt>
<dd><p>A <code>numeric</code> vector, <code>matrix</code>, <code>data.frame</code>, or
similar corresponding to a set of mediators (on the causal pathway between
the intervention A and the outcome Y).</p></dd>


<dt>Y</dt>
<dd><p>A <code>numeric</code> vector corresponding to an outcome variable.</p></dd>


<dt>R</dt>
<dd><p>A <code>logical</code> vector indicating whether a sampled observation's
mediator was measured via a two-phase sampling design. Defaults to a
vector of ones, implying that two-phase sampling was not performed.</p></dd>


<dt>obs_weights</dt>
<dd><p>A <code>numeric</code> vector of observation-level weights. The
default is to give all observations equal weighting.</p></dd>


<dt>svy_weights</dt>
<dd><p>A <code>numeric</code> vector of observation-level weights that
have been computed externally, such as survey sampling weights. Such
weights are used in the construction of re-weighted efficient estimators.</p></dd>


<dt>two_phase_weights</dt>
<dd><p>A <code>numeric</code> vector of known observation-level
weights corresponding to the inverse probability of the mediator being
measured. Defaults to a vector of ones.</p></dd>


<dt>effect</dt>
<dd><p>A <code>character</code> indicating whether to compute the direct or
the indirect effect as discussed in &lt;https://arxiv.org/abs/1912.09936&gt;.
This is ignored when the argument <code>contrast</code> is provided. By default,
the direct effect is estimated.</p></dd>


<dt>contrast</dt>
<dd><p>A <code>numeric</code> double indicating the two values of the
intervention <code>A</code> to be compared. The default value of <code>NULL</code> has
no effect, as the value of the argument <code>effect</code> is instead used to
define the contrasts. To override <code>effect</code>, provide a <code>numeric</code>
double vector, giving the values of a' and a*, e.g., <code>c(0, 1)</code>.</p></dd>


<dt>g_learners</dt>
<dd><p>A <code><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></code> object, or other learner class
(inheriting from <code><a href="https://tlverse.org/sl3/reference/Lrnr_base.html" class="external-link">Lrnr_base</a></code>), containing instantiated
learners from <span class="pkg">sl3</span>; used to fit a model for the propensity score.</p></dd>


<dt>h_learners</dt>
<dd><p>A <code><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></code> object, or other learner class
(inheriting from <code><a href="https://tlverse.org/sl3/reference/Lrnr_base.html" class="external-link">Lrnr_base</a></code>), containing instantiated
learners from <span class="pkg">sl3</span>; used to fit a model for a parameterization of the
propensity score that conditions on the mediators.</p></dd>


<dt>b_learners</dt>
<dd><p>A <code><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></code> object, or other learner class
(inheriting from <code><a href="https://tlverse.org/sl3/reference/Lrnr_base.html" class="external-link">Lrnr_base</a></code>), containing instantiated
learners from <span class="pkg">sl3</span>; used to fit a model for the outcome regression.</p></dd>


<dt>q_learners</dt>
<dd><p>A <code><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></code> object, or other learner class
(inheriting from <code><a href="https://tlverse.org/sl3/reference/Lrnr_base.html" class="external-link">Lrnr_base</a></code>), containing instantiated
learners from <span class="pkg">sl3</span>; used to fit a model for a nuisance regression of
the intermediate confounder, conditioning on the treatment and potential
baseline covariates.</p></dd>


<dt>r_learners</dt>
<dd><p>A <code><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></code> object, or other learner class
(inheriting from <code><a href="https://tlverse.org/sl3/reference/Lrnr_base.html" class="external-link">Lrnr_base</a></code>), containing instantiated
learners from <span class="pkg">sl3</span>; used to fit a model for a nuisance regression of
the intermediate confounder, conditioning on the mediators, the treatment,
and potential baseline confounders.</p></dd>


<dt>u_learners</dt>
<dd><p>A <code><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></code> object, or other learner class
(inheriting from <code><a href="https://tlverse.org/sl3/reference/Lrnr_base.html" class="external-link">Lrnr_base</a></code>), containing instantiated
learners from <span class="pkg">sl3</span>; used to fit a pseudo-outcome regression required
for in the efficient influence function.</p></dd>


<dt>v_learners</dt>
<dd><p>A <code><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></code> object, or other learner class
(inheriting from <code><a href="https://tlverse.org/sl3/reference/Lrnr_base.html" class="external-link">Lrnr_base</a></code>), containing instantiated
learners from <span class="pkg">sl3</span>; used to fit a pseudo-outcome regression required
for in the efficient influence function.</p></dd>


<dt>d_learners</dt>
<dd><p>A <code><a href="https://tlverse.org/sl3/reference/Stack.html" class="external-link">Stack</a></code> object, or other learner class
(inheriting from <code><a href="https://tlverse.org/sl3/reference/Lrnr_base.html" class="external-link">Lrnr_base</a></code>), containing instantiated
learners from <span class="pkg">sl3</span>; used to fit an initial efficient influence
function regression when computing the efficient influence function in a
two-phase sampling design.</p></dd>


<dt>estimator</dt>
<dd><p>The desired estimator of the direct or indirect effect (or
contrast-specific parameter) to be computed. Both an efficient one-step
estimator using cross-fitting and a cross-validated targeted minimum loss
estimator (TMLE) are available. The default is the TML estimator.</p></dd>


<dt>estimator_args</dt>
<dd><p>A <code>list</code> of extra arguments to be passed (via
<code>...</code>) to the function call for the specified estimator. The default
is chosen so as to allow the number of folds used in computing the one-step
or TML estimators to be easily adjusted. In the case of the TML estimator,
the number of update (fluctuation) iterations is limited, and a tolerance
is included for the updates introduced by the tilting (fluctuation) models.</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># here, we show one-step and TML estimates of the interventional direct</span></span></span>
<span class="r-in"><span><span class="co"># effect; the indirect effect can be evaluated by a straightforward change</span></span></span>
<span class="r-in"><span><span class="co"># to the penultimate argument. the natural direct and indirect effects can</span></span></span>
<span class="r-in"><span><span class="co"># be evaluated by omitting the argument Z (inappropriate in this example).</span></span></span>
<span class="r-in"><span><span class="co"># create data: covariates W, exposure A, post-exposure-confounder Z,</span></span></span>
<span class="r-in"><span><span class="co">#              mediator M, outcome Y</span></span></span>
<span class="r-in"><span><span class="va">n_obs</span> <span class="op">&lt;-</span> <span class="fl">200</span></span></span>
<span class="r-in"><span><span class="va">w_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">w_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">w_1</span>, <span class="va">w_2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">w</span> <span class="op">-</span> <span class="va">a</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="op">*</span> <span class="va">w</span> <span class="op">+</span> <span class="va">a</span> <span class="op">-</span> <span class="va">z</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">w</span> <span class="op">-</span> <span class="va">a</span> <span class="op">-</span> <span class="va">z</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">m_1</span>, <span class="va">m_2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="op">-</span> <span class="va">z</span> <span class="op">+</span> <span class="va">a</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># one-step estimate of the interventional direct effect</span></span></span>
<span class="r-in"><span><span class="va">os_de</span> <span class="op">&lt;-</span> <span class="fu">medoutcon</span><span class="op">(</span></span></span>
<span class="r-in"><span>  W <span class="op">=</span> <span class="va">w</span>, A <span class="op">=</span> <span class="va">a</span>, Z <span class="op">=</span> <span class="va">z</span>, M <span class="op">=</span> <span class="va">m</span>, Y <span class="op">=</span> <span class="va">y</span>,</span></span>
<span class="r-in"><span>  effect <span class="op">=</span> <span class="st">"direct"</span>,</span></span>
<span class="r-in"><span>  estimator <span class="op">=</span> <span class="st">"onestep"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># TML estimate of the interventional direct effect</span></span></span>
<span class="r-in"><span><span class="co"># NOTE: improved variance estimate and de-biasing from targeting procedure</span></span></span>
<span class="r-in"><span><span class="va">tmle_de</span> <span class="op">&lt;-</span> <span class="fu">medoutcon</span><span class="op">(</span></span></span>
<span class="r-in"><span>  W <span class="op">=</span> <span class="va">w</span>, A <span class="op">=</span> <span class="va">a</span>, Z <span class="op">=</span> <span class="va">z</span>, M <span class="op">=</span> <span class="va">m</span>, Y <span class="op">=</span> <span class="va">y</span>,</span></span>
<span class="r-in"><span>  effect <span class="op">=</span> <span class="st">"direct"</span>,</span></span>
<span class="r-in"><span>  estimator <span class="op">=</span> <span class="st">"tmle"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nima Hejazi, Iván Díaz, Kara Rudolph.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

