---
output:
  rmarkdown::github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# R/`medoutconlite`

> [Lite] Efficient Causal Mediation Analysis with Mediator-Outcome Confounding

__Authors:__ [Iván Díaz](https://idiaz.xyz) and [Nima
Hejazi](https://nimahejazi.org)

---

## What's `medoutconlite`?

The `medoutconlite` R package provides facilities for efficient estimation of
stochastic (in)direct effects that measure the impact of a treatment variable
$A$ on an outcome variable $Y$, through a direct path (through $A$ only) and
an indirect path (through a set of mediators $M$ only), in the presence of an
intermediate <b>med</b>iator-<b>out</b>come <b>con</b>founder $Z$, itself
affected by the treatment $A$. It serves as a lite version of the [`medoutcon`
package](https://github.com/nhejazi/medoutcon) with fewer dependencies.

---

## Installation

Install the most recent _stable release_ from GitHub via
[`remotes`](https://CRAN.R-project.org/package=remotes):

```{r gh-master-installation, eval=FALSE}
remotes::install_github("nhejazi/medoutcon")
```

---

## Example

To illustrate how `medoutcon` may be used to estimate stochastic (in)direct
effects of the treatment (`A`) on the outcome (`Y`) in the presence of
mediator(s) (`M`) and a binary mediator-outcome confounder (`Z`), consider the
following simple example:

```{r simple_example, message=FALSE, warning=FALSE}
# preliminaries
devtools::load_all(".")
library(SuperLearner)
#candidates <- c("SL.mean", "SL.glm", "SL.glmnet", "SL.earth", "SL.caretRF",
                #"SL.caretXGB")
candidates <- c("SL.mean", "SL.glm", "SL.glmnet", "SL.earth")

# simulate data
n <- 500
data <- simdata(n)

# estimate stochastic mediation effect
effects <- mediation(data, weights = rep(1, n),
                     candidatesg = candidates,
                     candidatese = candidates,
                     candidatesm = candidates,
                     candidatesr = candidates,
                     candidatesq = candidates,
                     candidatesu = candidates,
                     candidatesv = candidates,
                     nfolds = 5,
                     family.outcome = binomial())
effects
```

